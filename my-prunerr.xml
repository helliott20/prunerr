<?xml version="1.0"?>
<Container version="2">
    <Name>Prunerr</Name>
    <Repository>helliott20/prunerr:latest</Repository>
    <Registry>https://hub.docker.com/r/helliott20/prunerr</Registry>
    <Network>bridge</Network>
    <MyIP/>
    <Shell>sh</Shell>
    <Privileged>false</Privileged>
    <Support>https://github.com/helliott20/prunerr/issues</Support>
    <Project>https://github.com/helliott20/prunerr</Project>
    <Overview>
        Prunerr is a media library cleanup and management tool designed to work with Plex, Sonarr, and Radarr.

        Features:
        - Automatic detection of unwatched media
        - Integration with Sonarr and Radarr for intelligent cleanup
        - Tautulli integration for watch history analysis
        - Overseerr integration for request tracking
        - Configurable retention policies and smart rules
        - Discord notifications for cleanup actions
        - Web-based dashboard for monitoring and management

        Configure your Plex, Sonarr, Radarr, and optionally Tautulli/Overseerr API keys to get started.
    </Overview>
    <Category>MediaServer:Management Tools:</Category>
    <WebUI>http://[IP]:[PORT:3000]/</WebUI>
    <TemplateURL>https://raw.githubusercontent.com/helliott20/prunerr/main/my-prunerr.xml</TemplateURL>
    <Icon>https://raw.githubusercontent.com/helliott20/prunerr/main/assets/icon.svg</Icon>
    <ExtraParams/>
    <PostArgs/>
    <CPUset/>
    <DateInstalled></DateInstalled>
    <Requires>
        Plex Media Server, Sonarr (optional), Radarr (optional), Tautulli (optional)
    </Requires>

    <!-- Port Configuration -->
    <Config
        Name="Web UI Port"
        Target="3000"
        Default="3000"
        Mode="tcp"
        Description="Port for the Prunerr web interface"
        Type="Port"
        Display="always"
        Required="true"
        Mask="false">3000</Config>

    <!-- Data Path -->
    <Config
        Name="Data Path"
        Target="/app/data"
        Default="/mnt/user/appdata/prunerr"
        Mode="rw"
        Description="Path to store Prunerr database and configuration. This should be persistent storage."
        Type="Path"
        Display="always"
        Required="true"
        Mask="false">/mnt/user/appdata/prunerr</Config>

    <!-- Plex Configuration -->
    <Config
        Name="Plex URL"
        Target="PLEX_URL"
        Default="http://plex:32400"
        Mode=""
        Description="URL to your Plex Media Server (e.g., http://192.168.1.100:32400 or http://plex:32400)"
        Type="Variable"
        Display="always"
        Required="true"
        Mask="false">http://plex:32400</Config>

    <Config
        Name="Plex Token"
        Target="PLEX_TOKEN"
        Default=""
        Mode=""
        Description="Your Plex authentication token. See: https://support.plex.tv/articles/204059436-finding-an-authentication-token-x-plex-token/"
        Type="Variable"
        Display="always"
        Required="true"
        Mask="true"></Config>

    <!-- Sonarr Configuration -->
    <Config
        Name="Sonarr URL"
        Target="SONARR_URL"
        Default="http://sonarr:8989"
        Mode=""
        Description="URL to your Sonarr instance (e.g., http://192.168.1.100:8989 or http://sonarr:8989). Leave empty to disable Sonarr integration."
        Type="Variable"
        Display="always"
        Required="false"
        Mask="false">http://sonarr:8989</Config>

    <Config
        Name="Sonarr API Key"
        Target="SONARR_API_KEY"
        Default=""
        Mode=""
        Description="Your Sonarr API key. Found in Sonarr under Settings > General > Security."
        Type="Variable"
        Display="always"
        Required="false"
        Mask="true"></Config>

    <!-- Radarr Configuration -->
    <Config
        Name="Radarr URL"
        Target="RADARR_URL"
        Default="http://radarr:7878"
        Mode=""
        Description="URL to your Radarr instance (e.g., http://192.168.1.100:7878 or http://radarr:7878). Leave empty to disable Radarr integration."
        Type="Variable"
        Display="always"
        Required="false"
        Mask="false">http://radarr:7878</Config>

    <Config
        Name="Radarr API Key"
        Target="RADARR_API_KEY"
        Default=""
        Mode=""
        Description="Your Radarr API key. Found in Radarr under Settings > General > Security."
        Type="Variable"
        Display="always"
        Required="false"
        Mask="true"></Config>

    <!-- Tautulli Configuration -->
    <Config
        Name="Tautulli URL"
        Target="TAUTULLI_URL"
        Default="http://tautulli:8181"
        Mode=""
        Description="URL to your Tautulli instance (optional). Used for detailed watch history analysis."
        Type="Variable"
        Display="advanced"
        Required="false"
        Mask="false">http://tautulli:8181</Config>

    <Config
        Name="Tautulli API Key"
        Target="TAUTULLI_API_KEY"
        Default=""
        Mode=""
        Description="Your Tautulli API key. Found in Tautulli under Settings > Web Interface."
        Type="Variable"
        Display="advanced"
        Required="false"
        Mask="true"></Config>

    <!-- Overseerr Configuration -->
    <Config
        Name="Overseerr URL"
        Target="OVERSEERR_URL"
        Default="http://overseerr:5055"
        Mode=""
        Description="URL to your Overseerr instance (optional). Used for request tracking."
        Type="Variable"
        Display="advanced"
        Required="false"
        Mask="false">http://overseerr:5055</Config>

    <Config
        Name="Overseerr API Key"
        Target="OVERSEERR_API_KEY"
        Default=""
        Mode=""
        Description="Your Overseerr API key. Found in Overseerr under Settings &gt; General."
        Type="Variable"
        Display="advanced"
        Required="false"
        Mask="true"></Config>

    <!-- Discord Configuration -->
    <Config
        Name="Discord Webhook URL"
        Target="DISCORD_WEBHOOK_URL"
        Default=""
        Mode=""
        Description="Discord webhook URL for notifications. Create in Discord Server Settings &gt; Integrations &gt; Webhooks."
        Type="Variable"
        Display="advanced"
        Required="false"
        Mask="true"></Config>

    <!-- Application Settings -->
    <Config
        Name="Log Level"
        Target="LOG_LEVEL"
        Default="info"
        Mode=""
        Description="Logging verbosity level: error, warn, info, debug"
        Type="Variable"
        Display="advanced"
        Required="false"
        Mask="false">info</Config>

    <Config
        Name="PUID"
        Target="PUID"
        Default="99"
        Mode=""
        Description="User ID for file permissions"
        Type="Variable"
        Display="advanced"
        Required="false"
        Mask="false">99</Config>

    <Config
        Name="PGID"
        Target="PGID"
        Default="100"
        Mode=""
        Description="Group ID for file permissions"
        Type="Variable"
        Display="advanced"
        Required="false"
        Mask="false">100</Config>
</Container>
